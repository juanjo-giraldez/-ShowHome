{"ast":null,"code":"import _classCallCheck from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import EventService from\"../../service/Events.service\";import{Container,Row,Button,Modal}from\"react-bootstrap\";import EventCard from\"../events/Events-card\";import EventForm from\"../events/Events-form\";var CreatorProfile=/*#__PURE__*/function(_React$Component){_inherits(CreatorProfile,_React$Component);// el hijo no puede traer nada del padre sin el props\nfunction CreatorProfile(props){var _this;_classCallCheck(this,CreatorProfile);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreatorProfile).call(this,props));_this.componentDidMount=function(){return _this.updateEventsList();};_this.updateEventsList=function(){_this._EventService.getAllEvents().then(function(allEventsFromDB){var eventlist=allEventsFromDB.data.filter(function(event){return _this.state.loggedInUser===event.creator;});_this.setState({events:eventlist});}).catch(function(err){return console.log(\"Error\",err);});};_this.deleteEvent=function(id){_this._EventService.deleteEvent(id).then(_this.updateEventsList);};_this.handleShow=function(){return _this.setState({showModalWindow:true});};_this.handleClose=function(){return _this.setState({showModalWindow:false});};_this._EventService=new EventService();_this.state={loggedInUser:props.loggedInUser._id,events:[],showModalWindow:false};return _this;}_createClass(CreatorProfile,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"section\",null,React.createElement(Container,null,React.createElement(\"h1\",null,\" Mis Eventos \"),React.createElement(Button,{variant:\"dark\",onClick:this.handleShow},\" \",\"A\\xF1adir evento\",\" \"),React.createElement(Row,null,\" \",this.state.events.map(function(event){return React.createElement(EventCard,Object.assign({key:event._id},event,{updateEventsList:_this2.updateEventsList,deleteEvent:_this2.deleteEvent}));}),\" \"),\" \"),React.createElement(Modal,{show:this.state.showModalWindow,onHide:this.handleClose},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,\" A\\xF1adir nuevo evento \"),\" \"),\" \",React.createElement(Modal.Body,null,React.createElement(EventForm,{closeModalWindow:this.handleClose,updateEventsList:this.updateEventsList,loggedInUser:this.state.loggedInUser}),\" \"),\" \"));}}]);return CreatorProfile;}(React.Component);export default CreatorProfile;// import React from \"react\";\n// const Creator = props =>  <h1> Bienvenid @ {props.loggedInUser.username} tu categoria es {props.loggedInUser.role} Kultural</h1>;;\n// export default Creator;","map":{"version":3,"sources":["/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/src/components/zone/Creator.js"],"names":["React","EventService","Container","Row","Button","Modal","EventCard","EventForm","CreatorProfile","props","componentDidMount","updateEventsList","_EventService","getAllEvents","then","allEventsFromDB","eventlist","data","filter","event","state","loggedInUser","creator","setState","events","catch","err","console","log","deleteEvent","id","handleShow","showModalWindow","handleClose","_id","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport EventService from \"../../service/Events.service\";\n\nimport { Container, Row, Button, Modal } from \"react-bootstrap\";\n\nimport EventCard from \"../events/Events-card\";\nimport EventForm from \"../events/Events-form\";\n\nclass CreatorProfile extends React.Component {\n  // el hijo no puede traer nada del padre sin el props\n  constructor(props) {\n    super(props);\n    this._EventService = new EventService();\n    this.state = {\n      loggedInUser: props.loggedInUser._id,\n      events: [],\n      showModalWindow: false\n    };\n  }\n\n  componentDidMount = () => this.updateEventsList();\n\n  updateEventsList = () => {\n    this._EventService\n      .getAllEvents()\n      .then(allEventsFromDB => {\n        let eventlist = allEventsFromDB.data.filter(\n          event => this.state.loggedInUser === event.creator\n        );\n        this.setState({\n          events: eventlist\n        });\n      })\n      .catch(err => console.log(\"Error\", err));\n  };\n  deleteEvent = id => {\n    this._EventService\n      .deleteEvent(id)\n      .then(this.updateEventsList)\n  }\n\n  handleShow = () =>\n    this.setState({\n      showModalWindow: true\n    });\n  handleClose = () =>\n    this.setState({\n      showModalWindow: false\n    });\n\n  render() {\n    return (\n      <section>\n        <Container>\n          <h1> Mis Eventos </h1>\n          <Button variant=\"dark\" onClick={this.handleShow}>\n            {\" \"}\n            Añadir evento{\" \"}\n          </Button>\n          <Row>\n            {\" \"}\n            {this.state.events.map(event => (\n              < EventCard key = {\n                event._id\n              } {\n                ...event\n              }\n              updateEventsList = {\n                this.updateEventsList\n              }\n                deleteEvent={\n                  this.deleteEvent\n                }\n              />\n            ))}{\" \"}\n          </Row>{\" \"}\n        </Container>\n\n        <Modal show={this.state.showModalWindow} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title> Añadir nuevo evento </Modal.Title>{\" \"}\n          </Modal.Header>{\" \"}\n          <Modal.Body>\n            <EventForm\n              closeModalWindow={this.handleClose}\n              updateEventsList={this.updateEventsList}\n              loggedInUser={this.state.loggedInUser}\n            />{\" \"}\n          </Modal.Body>{\" \"}\n        </Modal>\n      </section>\n    );\n  }\n}\n\nexport default CreatorProfile;\n\n// import React from \"react\";\n\n// const Creator = props =>  <h1> Bienvenid @ {props.loggedInUser.username} tu categoria es {props.loggedInUser.role} Kultural</h1>;;\n\n// export default Creator;\n"]},"metadata":{},"sourceType":"module"}