{"ast":null,"code":"import _classCallCheck from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import EventService from\"../../service/Events.service\";import{Container,Row,Button,Modal,Col}from\"react-bootstrap\";import EventCard from\"../events/Events-card\";import EventSelect from\"../events/Events-card-mySelect\";import EventForm from\"../events/Events-form\";var CreatorProfile=/*#__PURE__*/function(_React$Component){_inherits(CreatorProfile,_React$Component);// el hijo no puede traer nada del padre sin el props\nfunction CreatorProfile(props){var _this;_classCallCheck(this,CreatorProfile);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreatorProfile).call(this,props));_this.componentDidMount=function(){return _this.updateEventsList();};_this.updateEventsList=function(){_this._EventService.getAllEvents().then(function(allEventsFromDB){var eventlist=allEventsFromDB.data.filter(function(event){return _this.state.loggedInUser===event.creator;});_this.setState({events:eventlist});}).catch(function(err){return console.log(\"Error\",err);});var idAll=_this.props.loggedInUser&&_this.props.loggedInUser._id;_this._EventService.selectTheEvent(idAll).then(function(allEventsFromDB){_this.setState({eventsSelect:allEventsFromDB.data});}).catch(function(err){return console.log(\"Error\",err);});};_this.deleteEvent=function(id){_this._EventService.deleteEvent(id).then(_this.updateEventsList);};_this.deleteSelect=function(id){console.log(\"soy el delete\");var idUser=_this.props.loggedInUser._id;_this._EventService.getOut(id,idUser).then(_this.updateEventsList);};_this.handleShow=function(){return _this.setState({showModalWindow:true});};_this.handleClose=function(){return _this.setState({showModalWindow:false});};_this._EventService=new EventService();_this.state={loggedInUser:props.loggedInUser._id,events:[],eventsSelect:[],showModalWindow:false};return _this;}_createClass(CreatorProfile,[{key:\"render\",value:function render(){var _this2=this;console.log(this.props.loggedInUser);return React.createElement(\"section\",null,React.createElement(Container,null,React.createElement(Row,null,React.createElement(Col,{md:6},React.createElement(\"h2\",null,\" Usuario: \",this.props.loggedInUser.username),React.createElement(\"h4\",null,\" Nombre: \",this.props.loggedInUser.firstName),React.createElement(\"h4\",null,\" Apellidos: \",this.props.loggedInUser.lastName),React.createElement(\"h4\",null,\" Gustos y preferencias: \",this.props.loggedInUser.category)),React.createElement(Col,{md:6},React.createElement(\"img\",{src:this.props.loggedInUser.imgUrl,alt:\"Foto usuario\"}))),React.createElement(\"hr\",null),React.createElement(\"h1\",null,\" Mis Eventos \"),React.createElement(Button,{variant:\"dark\",onClick:this.handleShow},\" \",\"A\\xF1adir evento\",\" \"),React.createElement(Row,null,this.state.events.map(function(event){return React.createElement(EventCard,Object.assign({key:event._id},event,{updateEventsList:_this2.updateEventsList,deleteEvent:_this2.deleteEvent}));})),React.createElement(\"hr\",null),React.createElement(\"h2\",null,\" Mis planes seleccionados \"),React.createElement(Row,null,this.state.eventsSelect.map(function(event){return React.createElement(EventSelect,Object.assign({key:event._id},event,{updateEventsList:_this2.updateEventsList,deleteSelect:_this2.deleteSelect}));}))),React.createElement(\"div\",null,React.createElement(Modal,{show:this.state.showModalWindow,onHide:this.handleClose},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,\" A\\xF1adir nuevo evento \"),\" \"),\" \",React.createElement(Modal.Body,null,React.createElement(EventForm,{closeModalWindow:this.handleClose,updateEventsList:this.updateEventsList,loggedInUser:this.state.loggedInUser}),\" \"),\" \")));}}]);return CreatorProfile;}(React.Component);export default CreatorProfile;","map":{"version":3,"sources":["/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/src/components/zone/Creator.js"],"names":["React","EventService","Container","Row","Button","Modal","Col","EventCard","EventSelect","EventForm","CreatorProfile","props","componentDidMount","updateEventsList","_EventService","getAllEvents","then","allEventsFromDB","eventlist","data","filter","event","state","loggedInUser","creator","setState","events","catch","err","console","log","idAll","_id","selectTheEvent","eventsSelect","deleteEvent","id","deleteSelect","idUser","getOut","handleShow","showModalWindow","handleClose","username","firstName","lastName","category","imgUrl","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport EventService from \"../../service/Events.service\";\n\nimport { Container, Row, Button, Modal , Col} from \"react-bootstrap\";\n\nimport EventCard from \"../events/Events-card\";\n\nimport EventSelect from \"../events/Events-card-mySelect\";\nimport EventForm from \"../events/Events-form\";\n\n\nclass CreatorProfile extends React.Component {\n  // el hijo no puede traer nada del padre sin el props\n  constructor(props) {\n    super(props);\n   \n    this._EventService = new EventService();\n    this.state = {\n      loggedInUser: props.loggedInUser._id,\n      events: [],\n      eventsSelect: [], \n      \n      showModalWindow: false\n      \n    };\n    \n    \n  }\n\n  componentDidMount = () => this.updateEventsList();\n  \n  updateEventsList = () => {\n    \n    this._EventService\n      .getAllEvents()\n    \n      .then(allEventsFromDB => {\n        let eventlist = allEventsFromDB.data.filter(\n          event => this.state.loggedInUser === event.creator\n          );\n          this.setState({\n          events: eventlist\n        });\n      })\n      \n      .catch(err => console.log(\"Error\", err));\n\n    let idAll = this.props.loggedInUser && this.props.loggedInUser._id\n    \n    this._EventService\n      .selectTheEvent(idAll)\n      .then(allEventsFromDB => {\n        \n       \n        this.setState({\n          eventsSelect: allEventsFromDB.data\n        });\n\n      })\n\n      .catch(err => console.log(\"Error\", err));\n      };\n\n\n      deleteEvent = id => {\n        this._EventService\n          .deleteEvent(id)\n          .then(this.updateEventsList)\n      }\n\n      deleteSelect = (id) => {\n        console.log(\"soy el delete\")\n  \n        let idUser = this.props.loggedInUser._id\n        this._EventService\n        .getOut(id, idUser)\n        .then(this.updateEventsList)\n  }\n    \n      handleShow = () =>\n        this.setState({\n          showModalWindow: true\n        });\n      handleClose = () =>\n        this.setState({\n          showModalWindow: false\n        });\n    \n      render() {\n        console.log(this.props.loggedInUser)\n        return (\n          <section>\n            <Container>\n              <Row>\n                <Col md={6}>\n                <h2> Usuario: {this.props.loggedInUser.username}</h2>\n                <h4> Nombre: {this.props.loggedInUser.firstName}</h4>\n                <h4> Apellidos: {this.props.loggedInUser.lastName}</h4>\n                <h4> Gustos y preferencias: {this.props.loggedInUser.category}</h4>\n              </Col>\n              <Col md={6}>\n                <img\n                  src={this.props.loggedInUser.imgUrl}\n                  alt={\"Foto usuario\"}\n                />\n              </Col>\n            </Row>\n              \n              <hr></hr>\n              <h1> Mis Eventos </h1>\n              < Button \n              variant = \"dark\"\n              onClick = {\n                this.handleShow\n              } >\n                {\" \"}\n                Añadir evento{\" \"}\n              </Button>\n              <Row>\n                {this.state.events.map(event => (\n                  <EventCard\n                    key={event._id}\n                    {...event}\n                    updateEventsList={this.updateEventsList}\n                    deleteEvent={this.deleteEvent}\n                  />\n                ))}\n              </Row>\n              <hr></hr>\n              <h2> Mis planes seleccionados </h2>\n              <Row>\n                {this.state.eventsSelect.map(event => (\n                  <EventSelect\n                    key={event._id}\n                    {...event}\n                    updateEventsList={this.updateEventsList}\n                    deleteSelect={this.deleteSelect}\n                  />\n                ))}\n              </Row>\n            </Container>\n\n            <div>\n              <Modal \n                show={this.state.showModalWindow}\n                onHide={this.handleClose}\n              >\n                < Modal.Header closeButton>\n                  <Modal.Title> Añadir nuevo evento </Modal.Title>{\" \"}\n                </Modal.Header>{\" \"}\n                < Modal.Body>\n                  <EventForm\n                    closeModalWindow={this.handleClose}\n                    updateEventsList={this.updateEventsList}\n                    loggedInUser={this.state.loggedInUser}\n                  />{\" \"}\n                </Modal.Body>{\" \"}\n              </Modal>\n            </div>\n          </section>\n        );\n      }\n    }\n    \n    export default CreatorProfile;\n\n  \n\n\n\n"]},"metadata":{},"sourceType":"module"}