{"ast":null,"code":"import _defineProperty from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Button,Form,Container,Toast}from'react-bootstrap';import Service from'../../service/Auth.service';var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginForm).call(this,props));_this.handleInputChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState({user:_objectSpread({},_this.state.user,_defineProperty({},name,value))});};_this.handleSubmit=function(e){e.preventDefault();var _this$state$user=_this.state.user,username=_this$state$user.username,password=_this$state$user.password,role=_this$state$user.role;_this._service.login(username,password,role).then(function(theLoggedUser){_this.props.setUser(theLoggedUser.data);_this.setState({username:'',password:'',role:\"\"});if(theLoggedUser.data.role==='creator'){return _this.props.history.push('/profile/creator');}if(theLoggedUser.data.role==='host'){return _this.props.history.push('/profile/host');}if(theLoggedUser.data.role==='explorer'){return _this.props.history.push('/profile/explorer');}}).catch(function(err){_this.handleToastOpen(err.response.data.message);});};_this.handleToastClose=function(){return _this.setState({showToast:false,toastText:''});};_this.handleToastOpen=function(text){return _this.setState({showToast:true,toastText:text});};_this._service=new Service();_this.state={showToast:false,toastText:'',role:'',user:{username:'',password:''}};return _this;}_createClass(LoginForm,[{key:\"render\",value:function render(){return React.createElement(Container,null,React.createElement(\"article\",{className:\"form form-login\"},React.createElement(\"h1\",null,\"Iniciar sesi\\xF3n\"),React.createElement(Form,{onSubmit:this.handleSubmit},React.createElement(Form.Group,null,React.createElement(Form.Control,{type:\"text\",name:\"username\",placeholder:\"Usuario\",onChange:this.handleInputChange,value:this.state.username})),React.createElement(Form.Group,null,React.createElement(Form.Control,{type:\"password\",name:\"password\",placeholder:\"Contrase\\xF1a\",onChange:this.handleInputChange,value:this.state.password})),React.createElement(Button,{className:\" form-btn\",variant:\"dark\",type:\"submit\"},\"Iniciar sesi\\xF3n\"))),React.createElement(Toast,{onClose:this.handleToastClose,show:this.state.showToast,delay:3000,autohide:true,style:{position:'fixed',right:'10px',bottom:'10px',minWidth:'250px'}},React.createElement(Toast.Header,null,React.createElement(\"strong\",{className:\"mr-auto\"},\"Error\"),React.createElement(\"small\",null,\"Session manager\")),React.createElement(Toast.Body,null,this.state.toastText)));}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"sources":["/Users/usuario/Desktop/Ironhack/week7/2ShowHome/client/src/components/auth/Login.js"],"names":["React","Component","Button","Form","Container","Toast","Service","LoginForm","props","handleInputChange","e","target","name","value","setState","user","state","handleSubmit","preventDefault","username","password","role","_service","login","then","theLoggedUser","setUser","data","history","push","catch","err","handleToastOpen","response","message","handleToastClose","showToast","toastText","text","position","right","bottom","minWidth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button, Form, Container, Toast } from 'react-bootstrap'\n\nimport Service from '../../service/Auth.service'\n\nclass LoginForm extends Component {\n\n    constructor(props) {\n        super(props)\n        this._service = new Service()\n        this.state = {\n            showToast: false,\n            toastText: '',\n            role: '',\n            user: { username: '', password: '' }\n        }\n    }\n\n\n    handleInputChange = e => {\n        let { name, value } = e.target\n        this.setState({\n            user: { ...this.state.user, [name]: value }\n        })\n    }\n\n\n    handleSubmit = e => {\n        e.preventDefault()\n        const { username, password, role } = this.state.user\n        this._service.login(username, password, role)\n            .then(theLoggedUser => {\n                this.props.setUser(theLoggedUser.data)\n                \n                this.setState({ username: '', password: '' , role: \"\"})\n                if (theLoggedUser.data.role === 'creator') {return(this.props.history.push('/profile/creator'))}\n                if (theLoggedUser.data.role === 'host') {return (this.props.history.push('/profile/host'))}\n                if (theLoggedUser.data.role === 'explorer'){return (this.props.history.push('/profile/explorer'))}   \n            })\n            .catch(err => {\n                this.handleToastOpen(err.response.data.message)\n            })\n    }\n\n    handleToastClose = () => this.setState({ showToast: false, toastText: '' })\n    handleToastOpen = text => this.setState({ showToast: true, toastText: text })\n\n\n    render() {\n        return (\n            <Container>\n                < article className = \"form form-login\" >\n                <h1>Iniciar sesi칩n</h1>\n                  \n                <Form onSubmit={this.handleSubmit}>\n                    <Form.Group>\n                        {/* <Form.Label>Usuario</Form.Label> */}\n                        <Form.Control type=\"text\" name=\"username\" placeholder=\"Usuario\"onChange={this.handleInputChange} value={this.state.username} />\n                    </Form.Group>\n                    <Form.Group>\n                        {/* <Form.Label>Contrase침a</Form.Label> */}\n                        <Form.Control type=\"password\" name=\"password\" placeholder=\"Contrase침a\"onChange={this.handleInputChange} value={this.state.password} />\n                    </Form.Group>\n                    <Button  className=\" form-btn\"variant=\"dark\" type=\"submit\">Iniciar sesi칩n</Button>\n                </Form>\n                </article>\n\n                <Toast\n                    onClose={this.handleToastClose}\n                    show={this.state.showToast}\n                    delay={3000}\n                    autohide\n                    style={{\n                        position: 'fixed',\n                        right: '10px',\n                        bottom: '10px',\n                        minWidth: '250px'\n                    }}>\n                    <Toast.Header>\n                        <strong className=\"mr-auto\">Error</strong>\n                        <small>Session manager</small>\n                    </Toast.Header>\n                    <Toast.Body>{this.state.toastText}</Toast.Body>\n                </Toast>\n\n            </Container >\n        )\n    }\n}\n\n\nexport default LoginForm"]},"metadata":{},"sourceType":"module"}